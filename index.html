<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Choco Inventory | Premium Store</title>
    
    <!-- Professional Typography and Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    
    <!-- Image Zoom (GLightbox) CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />
</head>
<body>

    <header>
        <div class="header-content">
            <h1>Choco Inventory</h1>
            <p><i class="fa-solid fa-circle-check" style="color: #25D366;"></i> Verified Business | Fast Delivery</p>
        </div>
    </header>

    <div class="how-to-order">
        <h2><i class="fa-solid fa-cart-shopping"></i> How to Order</h2>
        <p>Browse our catalog. Click the WhatsApp button to chat with us directly for orders and payments.</p>
    </div>

    <!-- The Products will load here automatically from CSV -->
    <main id="product-container" class="product-grid">
        <p style="text-align: center; grid-column: 1/-1;">Loading catalog...</p>
    </main>

    <footer>
        <p><strong>Secure Payments via Paytm</strong></p>
        <p>Orders processed via WhatsApp Business: +971 50 224 7162</p>
        <p>&copy; 2024 Choco Inventory</p>
    </footer>

    <!-- Image Zoom JS -->
    <script src="https://cdn.jsdelivr.net/gh/mcstudios/glightbox/dist/js/glightbox.min.js"></script>
    
    <!-- CSV Parser & Logic -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>

    <script>
        const WHATSAPP_NUMBER = "971502247162";
        const CSV_URL = "Products.csv";

        // 1. Fetch and Parse the CSV
        Papa.parse(CSV_URL, {
            download: true,
            header: true,
            complete: function(results) {
                displayProducts(results.data);
            }
        });

        // 2. Generate the Product Cards
        function displayProducts(products) {
            const container = document.getElementById('product-container');
            container.innerHTML = ""; // Clear loader

            products.forEach(product => {
                // Skip empty rows
                if (!product.Name || !product.Code) return;

                const card = document.createElement('div');
                card.className = 'product-card';
                
                card.innerHTML = `
                    <div class="product-image-container">
                        <a href="images/${product.Image}" class="glightbox" data-description="${product.Details}">
                            <img src="images/${product.Image}" alt="${product.Name}" loading="lazy">
                        </a>
                    </div>
                    <div class="product-info">
                        <h3>${product.Name}</h3>
                        <p>${product.Details}</p>
                        <div class="product-meta">
                            <span class="code-tag">ID: ${product.Code}</span>
                        </div>
                        <a href="https://wa.me/${WHATSAPP_NUMBER}?text=Hi!%20I%20want%20to%20order:%20${encodeURIComponent(product.Name)}%20(Code:%20${product.Code})" 
                           class="btn-whatsapp">
                           <i class="fa-brands fa-whatsapp"></i> Order on WhatsApp
                        </a>
                    </div>
                `;
                container.appendChild(card);
            });

            // 3. Initialize the Image Zoom (Lightbox)
            const lightbox = GLightbox({
                touchNavigation: true,
                loop: true,
                zoomable: true
            });
        }
    </script>
</body>
</html>
